#include "nedsi.h"

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    [_MAIN] = LAYOUT_wrapper(
    UNIWL, ________________MAIN_L1________________,                                ________________MAIN_R1________________, A(KC_SPC),
    _______,    ________________MAIN_L2________________ ,                                ________________MAIN_R2________________,G(C(KC_RGHT)),
    MO(_MISC),  ________________MAIN_L3________________, _______, _______, _______, _______, ________________MAIN_R3________________, G(C(KC_LEFT)),
                    _______, MO(_SYM), LT(_MISC, KC_TAB), CACCCV, UNDO, NXTPRV,      KC_MPLY, KC_SPC, MO(_NUM), KC_MPLY
    ),

    [_GAMING] = LAYOUT_wrapper(
      KC_TAB,       ________________MAIN_L1________________,                                ________________MAIN_R1________________,   KC_MINS,
      KC_LCTL,      ________________GAMING_L2_________________,                             ________________MAIN_R2________________, KC_QUOT,
      MO(_MISC), ________________GAMING_L3_________________, _______, _______, _______, _______, ________________MAIN_R3________________, KC_EQL ,
                      KC_CAPS, LT(_SYM, KC_ESC), KC_SPC, KC_TAB, KC_LSFT, KC_BSPC, KC_LALT, KC_SPC, LT(_NUM, KC_ENT), KC_MUTE
    ),

    [_SYM] = LAYOUT_wrapper(
      _______, ________________SYM_L1________________,                                ________________SYM_R1________________, _______,
      _______, ________________SYM_L2________________,                                ________________SYM_R2________________, _______,
      _______, ________________SYM_L3________________,_______, _______, _______, _______,________________SYM_R3________________, _______,
                                 _______, _______, _______, _______, _______, _______,   KC_UNDS,  KC_EQL,MO(_NAV), _______
    ),

    [_ACC] = LAYOUT_wrapper(
       _______, ________________ACC_L1________________,                                ________________ACC_R1________________, _______,
       _______, ________________ACC_L2________________,                                ________________ACC_R2________________, _______,
       _______, ________________ACC_L3________________, _______, _______, _______, _______,________________ACC_R3________________, _______,
                                  _______, _______, _______, _______, _______, _______, _______, _______, _______, _______
    ),

    [_NUM] = LAYOUT_wrapper(
       _______, ________________NUM_L1________________,                                ________________NUM_R1________________, _______,
       _______, ________________NUM_L2________________,                                ________________NUM_R2________________, _______,
       _______, ________________NUM_L3________________,_______, _______, _______, _______,________________NUM_R3________________, _______,
                                 _______,MO(_NAV), KC_SPC, _______, _______, _______, _______, _______, _______, _______
    ),

    [_NAV] = LAYOUT_wrapper(
       _______, ________________NAV_L1________________,                                ________________NAV_R1________________, _______,
       _______, ________________NAV_L2________________,                                ________________NAV_R2________________, _______,
       _______, ________________NAV_L3________________,_______, _______, _______, _______,________________NAV_R3________________, _______,
                                 _______, _______, _______, _______, _______, _______, _______, _______, _______, _______
    ),

    [_MISC] = LAYOUT_wrapper(
       _______, ________________MISC_L1________________,                                ________________MISC_R1________________, _______,
       _______, ________________MISC_L2________________,                                ________________MISC_R2________________, _______,
       _______, ________________MISC_L3________________,_______, _______, _______, _______,________________MISC_R3________________, _______,
                                 _______, _______, _______, _______, _______, _______, KC_MPRV, KC_MPLY, KC_MNXT, _______
    )
};

#ifdef ENCODER_ENABLE
uint8_t selected_layer = 0;
void encoder_update_user(uint8_t index, bool clockwise) {
   if (index == 0) {
     if (clockwise) {
         tap_code16(C(KC_TAB));
     } else {
         tap_code16(S(C(KC_TAB)));
      }
    }
    else if (index == 1) {
        // Page up/Page down
        if (clockwise) {
            tap_code(KC_VOLU);
        } else {
            tap_code(KC_VOLD);
        }
    }
}
#endif

__attribute__ ((weak))
void matrix_init_keymap(void) {}
void matrix_init_user(void) {


  set_unicode_input_mode(UNICODE_MODE_LINUX);

  matrix_init_keymap();
}
